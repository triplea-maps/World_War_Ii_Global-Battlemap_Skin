language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: SOVJGtTLxJQC5cFlnq4M6Uweg2InX9hxtfl1aBiU+65HtTK4+rnQeLrOzUWgv4YBj/ZBPCk/UheVm/5LFF5iWlnDloaUpNHnFwkWQvXn5/uGWuea1lmqVryjZVyjuk7E1Fy0mLtJ/gyKaUrPe7126YVef3cjP8mOxP7PmE9fj/7blOnm1+VqS79jM7gvWKfHChSFANeUJp51pDevWrMnrcU/t09iZLIld8q/g1cCajhk8zYG74tJiKuff78R7K6QtnItY+31idOG3LQDrHFRWjcWkyYfP7dwNutXguY7YwtaexbOvXTAaPA/qBbvyMwtzRH6PrnaQfZwGM9096w4sLfdsBmgtZudlLRB7wQvJl/sd3ZeWfEVEavIQIOyvEoaV+zq8HTW+WxgXqHa5YnSvqt3VjnOJTIjUBnsHGBXb06crfSGkmf1u/UXbncbB1SAZ856YPFD6u2hCgUWg761BXxWgizayJtI9KxofXaM1joMz4CVGfEpm/fQ9VZjbWReoHxIE/QpSg3BfvaZ5jtwVrdxCCpG09rWmTbnUC8v9qNZeNMzoZpJVQUrujOvEqyAIZJ6zUlfmH/Abmyh95BVnrDvz2qOWiHOoHsGmR0MuF6Ux1efohdNUgAX1qfvp653HoZ9caRx9b5ETBj6il0VBzFOORKZyySbkiKfpSDEJbA=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
